<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ตารางเวรนักเรียน</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: sans-serif;
  background: #f5f5f5;
  margin: 0;
  padding: 10px;
}

h2 {
  text-align: center;
}

.controls {
  text-align: center;
  margin-bottom: 10px;
}

select {
  padding: 6px;
  font-size: 16px;
}

table {
  border-collapse: collapse;
  width: 100%;
  background: white;
}

th, td {
  border: 1px solid #ccc;
  padding: 4px;
  text-align: center;
  font-size: 13px;
}

th {
  background: #eee;
  position: sticky;
  top: 0;
  z-index: 2;
}

.day-header {
  font-size: 11px;
  color: #555;
}

td.cell {
  cursor: pointer;
  font-weight: bold;
}

/* สีเวร */
.v1 { background:#e3f2fd; }
.v2 { background:#fce4ec; }
.v3 { background:#e8f5e9; }
.v4 { background:#fff3e0; }
.v5 { background:#ede7f6; }
.v6 { background:#f3e5f5; }
.v7 { background:#e0f2f1; }
.v8 { background:#fbe9e7; }
</style>
</head>
<body>

<h2>ตารางเวรนักเรียน (จันทร์–ศุกร์)</h2>

<div class="controls">
  เดือน:
  <select id="month"></select>
  ปี (พ.ศ.):
  <select id="year"></select>
</div>

<table id="table"></table>

<script>
// ================== ข้อมูลนักเรียน ==================
const students = [
  { name: "นาย ณัฐวัฒน์ เกตุนอก", room: "5/1" },
  { name: "นาย กฤตภาส นามพะเนาว์", room: "5/1" },
  { name: "นางสาว พิยดา วงศ์ใหญ่", room: "5/1" },
  { name: "นางสาว กันกมล มูลจันทร์", room: "5/1" },
  { name: "นางสาว พรรณิภา คำสอนพันธุ์", room: "5/1" },
  { name: "นางสาว พิชญา ซ้ายจันทึก", room: "5/1" },
  { name: "นางสาว ณิชานันท์ นาคหมื่นไวย์", room: "5/1" },
  { name: "นาย ภาณุพงษ์ ดันไธสง", room: "5/1" },
  { name: "นาย เปรมอานนท์ เตี้ยจัตุรัส", room: "5/1" },

  { name: "นาย กวินภพ บ้วนนอก", room: "5/2" },
  { name: "นาย ก้องนเรนทร์ กระจ่างโพธิ์", room: "5/2" },
  { name: "นาย ฐิติพันธุ์ เตี้ยไธสง", room: "5/2" },
  { name: "นาย ปัญญา ทองนอก", room: "5/2" },
  { name: "นางสาว อภิรดา สัญจรโคกสูง", room: "5/2" },
  { name: "นางสาว ภคนันท์ รักกลาง", room: "5/2" },
  { name: "นางสาว อารีญากร ปราบอาต", room: "5/2" },
  { name: "นางสาว พรสวรรค์ ขาวละออ", room: "5/2" },
  { name: "นางสาว กัญญา มุ่งกลาง", room: "5/2" },

  { name: "นาย ศุกลวัฒน์ นรินทร์นอก", room: "5/3" },
  { name: "นาย ภัครพนธ์ บุญธานี", room: "5/3" },
  { name: "นาย ณัฐกิตติ์ รอดวินิจ", room: "5/3" },
  { name: "นางสาว นฤเนตร จรรยารัตนกุล", room: "5/3" },
  { name: "นางสาว วราทิพย์ นนนอก", room: "5/3" },
  { name: "นางสาว ธนาพร วงษ์อัง", room: "5/3" },

  { name: "นาย นนทกร โค้งนอก", room: "5/4" },
  { name: "นางสาว รัชชยาวตรี ป้องภักดี", room: "5/4" },

  { name: "นางสาว วัชราภรณ์ ห่องคำ", room: "5/5" },
  { name: "นางสาว ภัทธีมา ชัยชะนะ", room: "5/5" },
  { name: "นาย ธีรกานต์ ทาทอง", room: "5/5" },

  { name: "นางสาว ชนิกา ชาญตะกั่ว", room: "5/6" },
  { name: "นางสาว ถิรมน ปุ๊กสูงเนิน", room: "5/7" },
  { name: "นาย พัสกร ปิ่นประเสริฐ", room: "5/9" },

  { name: "นาย ณัฐกานต์ ร้อยลา", room: "5/11" },
  { name: "นางสาว ชาลิสา แสงทองสี", room: "5/11" },
  { name: "นางสาว จุฑารัตน์ ทดกลาง", room: "5/11" },
  { name: "นางสาว วรัทยา หมู่โสภิญ", room: "5/11" },
  { name: "นางสาว อาริสรา กุนอก", room: "5/11" },
  { name: "นางสาว ชฎาพร อุสาพรหม", room: "5/11" },
  { name: "นางสาว ณัชชา บินอารีเปน", room: "5/11" }
];

// ================== ตัวแปรระบบ ==================
const monthNames = ["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน",
"กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"];
const dayNamesShort = ["อา","จ","อ","พ","พฤ","ศ","ส"];

const monthSelect = document.getElementById("month");
const yearSelect = document.getElementById("year");
const table = document.getElementById("table");

// เดือน / ปี
monthNames.forEach((m,i)=> monthSelect.innerHTML += `<option value="${i}">${m}</option>`);
for(let y=2567;y<=2575;y++) yearSelect.innerHTML += `<option>${y}</option>`;

monthSelect.value = new Date().getMonth();
yearSelect.value = new Date().getFullYear() + 543;

// ================== สร้างตาราง ==================
function render(){
  const month = +monthSelect.value;
  const yearCE = +yearSelect.value - 543;
  table.innerHTML = "";

  const daysInMonth = new Date(yearCE, month+1, 0).getDate();
  const workDays = [];

  for(let d=1; d<=daysInMonth; d++){
    const date = new Date(yearCE, month, d);
    if(date.getDay() !== 0 && date.getDay() !== 6){
      workDays.push({d, day: date.getDay()});
    }
  }

  // หัวตาราง
  let head = "<tr><th>ชื่อ</th><th>สภา</th>";
  workDays.forEach(w=>{
    head += `<th>${w.d}<div class="day-header">${dayNamesShort[w.day]}</div></th>`;
  });
  head += "</tr>";
  table.innerHTML += head;

  // ข้อมูล
  students.forEach(s=>{
    let row = `<tr><td>${s.name}</td><td>${s.room}</td>`;
    workDays.forEach((_,i)=>{
      const v = (i % 8) + 1;
      row += `<td class="cell v${v}" onclick="edit(this)">${v}</td>`;
    });
    row += "</tr>";
    table.innerHTML += row;
  });
}

function edit(td){
  const v = prompt("ใส่เลขเวร (1-8)", td.innerText);
  if(v >= 1 && v <= 8){
    td.className = "cell v" + v;
    td.innerText = v;
  }
}

monthSelect.onchange = render;
yearSelect.onchange = render;
render();
</script>

</body>
</html>
