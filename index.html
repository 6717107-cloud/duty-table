<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ตารางเวรนักเรียน</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: sans-serif;
  background: #f5f5f5;
  margin: 0;
  padding: 10px;
}

h2 {
  text-align: center;
}

.controls {
  text-align: center;
  margin-bottom: 10px;
}

select {
  padding: 6px;
  font-size: 16px;
}

table {
  border-collapse: collapse;
  width: 100%;
  background: white;
}

th, td {
  border: 1px solid #ccc;
  padding: 4px;
  text-align: center;
  font-size: 13px;
}

th {
  background: #eee;
  position: sticky;
  top: 0;
  z-index: 2;
}

.section {
  background:#dfefff;
  font-weight:bold;
}

.day-header {
  font-size: 11px;
  color: #555;
}

td.cell {
  cursor: pointer;
  font-weight: bold;
}

/* สีเวร */
.v1 { background:#e3f2fd; }
.v2 { background:#fce4ec; }
.v3 { background:#e8f5e9; }
.v4 { background:#fff3e0; }
.v5 { background:#ede7f6; }
.v6 { background:#f3e5f5; }
.v7 { background:#e0f2f1; }
.v8 { background:#fbe9e7; }
</style>
</head>
<body>

<h2>ตารางเวรนักเรียน (จันทร์–ศุกร์)</h2>

<div class="controls">
  เดือน:
  <select id="month"></select>
  ปี (พ.ศ.):
  <select id="year"></select>
</div>

<table id="table"></table>

<script>
// ================== ข้อมูล ==================
const council = [
  { name:"นาย ณัฐวัฒน์ เกตุนอก", room:"5/1" },
  { name:"นาย กฤตภาส นามพะเนาว์", room:"5/1" },
  { name:"นางสาว พิยดา วงศ์ใหญ่", room:"5/1" },
  { name:"นางสาว กันกมล มูลจันทร์", room:"5/1" },
  { name:"นางสาว พรรณิภา คำสอนพันธุ์", room:"5/1" },
  { name:"นางสาว พิชญา ซ้ายจันทึก", room:"5/1" },
  { name:"นางสาว ณิชานันท์ นาคหมื่นไวย์", room:"5/1" },
  { name:"นาย ภาณุพงษ์ ดันไธสง", room:"5/1" },
  { name:"นาย เปรมอานนท์ เตี้ยจัตุรัส", room:"5/1" },

  { name:"นาย กวินภพ บ้วนนอก", room:"5/2" },
  { name:"นาย ก้องนเรนทร์ กระจ่างโพธิ์", room:"5/2" },
  { name:"นาย ฐิติพันธุ์ เตี้ยไธสง", room:"5/2" },
  { name:"นาย ปัญญา ทองนอก", room:"5/2" },
  { name:"นางสาว อภิรดา สัญจรโคกสูง", room:"5/2" },
  { name:"นางสาว ภคนันท์ รักกลาง", room:"5/2" },
  { name:"นางสาว อารีญากร ปราบอาต", room:"5/2" },
  { name:"นางสาว พรสวรรค์ ขาวละออ", room:"5/2" },
  { name:"นางสาว กัญญา มุ่งกลาง", room:"5/2" }
];

const subcommittee = [
  { name:"นางสาว วรกาญจน์ โพธิ์กลิ่น", room:"4/1" },
  { name:"นางสาว สิริกานดา ขอร่วมกลาง", room:"4/1" },
  { name:"นาย สุริยะ ปากวิเศษ", room:"4/2" },
  { name:"นางสาว ธนกมล ศรีธาวิรัตน์", room:"4/2" },
  { name:"นางสาว ปาริฉัตร ผึ่งด่านกลาง", room:"4/2" },
  { name:"นาย ทิวาวัชร์ แก้วลอดหล้า", room:"4/3" },
  { name:"นางสาว จงกลณี ปัญญา", room:"4/4" },
  { name:"นาย ฉัตรดนัย ทองอินทร์", room:"4/7" },
  { name:"นาย ก้องภพ แสนธนู", room:"4/12" },
  { name:"นาย สุวรรณภูมิ จบศรี", room:"4/12" },
  { name:"นาย เดชาวัต ตากิ่มนอก", room:"4/12" },
  { name:"นาย สุภกิตต์ วรวุฒิ", room:"4/12" },
  { name:"นางสาว ธัญรดา พูนสันเทียะ", room:"4/12" },
  { name:"นางสาว ณัฐกานต์ พระริต", room:"4/12" },
  { name:"นางสาว พิชญากร มุ่งผลกลาง", room:"4/12" },
  { name:"นางสาว เกวลิน ดุงโคกกรวด", room:"4/12" }
];

// ================== ระบบ ==================
const monthNames = ["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน",
"กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"];
const dayNames = ["อา","จ","อ","พ","พฤ","ศ","ส"];

const monthSel = document.getElementById("month");
const yearSel = document.getElementById("year");
const table = document.getElementById("table");

monthNames.forEach((m,i)=>monthSel.innerHTML+=`<option value="${i}">${m}</option>`);
for(let y=2567;y<=2575;y++) yearSel.innerHTML+=`<option>${y}</option>`;

monthSel.value = new Date().getMonth();
yearSel.value = new Date().getFullYear()+543;

function render(){
  const m = +monthSel.value;
  const y = +yearSel.value - 543;
  table.innerHTML = "";

  const days = [];
  const dim = new Date(y,m+1,0).getDate();
  for(let d=1; d<=dim; d++){
    const date = new Date(y,m,d);
    if(date.getDay()!==0 && date.getDay()!==6){
      days.push({d,day:date.getDay()});
    }
  }

  let head = "<tr><th>ชื่อ</th><th>ห้อง</th>";
  days.forEach(x=> head+=`<th>${x.d}<div class="day-header">${dayNames[x.day]}</div></th>`);
  head+="</tr>";
  table.innerHTML+=head;

  addSection("สภานักเรียน", council, days);
  addSection("อนุกรรมการ", subcommittee, days);
}

function addSection(title, list, days){
  table.innerHTML+=`<tr class="section"><td colspan="${days.length+2}">${title}</td></tr>`;
  list.forEach(s=>{
    let r = `<tr><td>${s.name}</td><td>${s.room}</td>`;
    days.forEach((_,i)=>{
      const v = (i%8)+1;
      r+=`<td class="cell v${v}" onclick="edit(this)">${v}</td>`;
    });
    r+="</tr>";
    table.innerHTML+=r;
  });
}

function edit(td){
  const v = prompt("ใส่เลขเวร (1-8)", td.innerText);
  if(v>=1 && v<=8){
    td.className="cell v"+v;
    td.innerText=v;
  }
}

monthSel.onchange=render;
yearSel.onchange=render;
render();
</script>

</body>
</html>
